{% extends 'principal/base.html' %}
{% block content %}
<div class="form-container empleado-form-optica" style="max-width: 500px; margin: 0 auto;">
    <h2 class="form-title text-center mb-4">Cambiar Estado de Fabricación</h2>
    <form method="post" class="mb-3">
        {% csrf_token %}
        <div class="mb-3 d-flex flex-column">
            <label class="form-label mb-1" for="fabricacion">Seleccione una fabricación:</label>
            <select name="fabricacion" id="fabricacion" class="form-select" required>
                {% for fab in fabricaciones %}
                    <option value="{{ fab.id_fabricacion }}">
                        Fabricación #{{ fab.id_fabricacion }} - Cliente: {{ fab.diagnostico.id_cita.id_cliente.nombre }} - Estado actual: {{ fab.estado }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3 d-flex flex-column">
            <label class="form-label mb-1" for="estado">Nuevo Estado:</label>
            <select name="estado" id="estado" class="form-select" required>
                <option value="en proceso">En proceso</option>
                <option value="terminada">Terminada</option>
                <option value="cancelada">Cancelada</option>
            </select>
        </div>
        <div class="d-flex justify-content-between align-items-center mt-4">
            <button type="button" class="btn btn-secondary btn-volver" onclick="window.history.back()">
                <i class="fas fa-arrow-left me-2"></i>Volver
            </button>
            <button type="submit" class="btn btn-optica">
                <i class="fas fa-sync-alt me-2"></i>Actualizar
            </button>
        </div>
    </form>
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-success mt-3">{{ message }}</div>
        {% endfor %}
    {% endif %}
</div>
{% endblock %}

