{% extends 'principal/base.html' %}
{% block content %}
<div class="form-container empleado-form-optica">
  <h2 class="form-title">Modificar Empleado</h2>
  {% if messages %}
    <ul>
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
  <form method="post">
    {% csrf_token %}
    {% if not datos_mostrados %}
      <div class="mb-3">
        <label for="usuario_busqueda">Ingrese usuario:</label>
        <input type="text" class="form-control" name="usuario_busqueda" required>
      </div>
      <div class="d-flex justify-content-between align-items-center mt-4">
        <button type="button" class="btn btn-secondary btn-volver" onclick="window.history.back()"><i class="fas fa-arrow-left me-2"></i>Volver</button>
        <button type="submit" class="btn btn-optica">Buscar</button>
      </div>
    {% endif %}
    {% if empleado %}
      <input type="hidden" name="usuario_original" value="{{ empleado.usuario }}">
      <div class="mb-3">
        <label for="usuario">Usuario:</label>
        <input type="text" class="form-control" name="usuario" value="{{ empleado.usuario }}" required>
      </div>
      <div class="mb-3">
        <label for="contrasena">Contraseña (dejar en blanco si no cambia):</label>
        <input type="password" class="form-control" name="contrasena">
      </div>
      <div class="mb-3">
        <label for="nombre">Nombre:</label>
        <input type="text" class="form-control" name="nombre" value="{{ empleado.nombre }}" required>
      </div>
      <div class="mb-3">
        <label for="rol">Rol:</label>
        <select class="form-select" name="rol" required>
          <option value="optometrista" {% if empleado.rol == 'optometrista' %}selected{% endif %}>Optometrista</option>
          <option value="recepcionista" {% if empleado.rol == 'recepcionista' %}selected{% endif %}>Recepcionista</option>
          <option value="tecnico" {% if empleado.rol == 'tecnico' %}selected{% endif %}>Técnico</option>
          <option value="supervisor" {% if empleado.rol == 'supervisor' %}selected{% endif %}>Supervisor</option>
        </select>
      </div>
      <div class="d-flex justify-content-between align-items-center mt-4">
        <button type="button" class="btn btn-secondary btn-volver" onclick="window.history.back()"><i class="fas fa-arrow-left me-2"></i>Volver</button>
        <button type="submit" name="actualizar" class="btn btn-optica">Actualizar</button>
      </div>
    {% endif %}
  </form>
</div>
{% endblock %}

