{% extends 'principal/base.html' %}
{% block title %}Registrar Cliente{% endblock %}
{% block content %}
<div class="form-container empleado-form-optica" style="max-width: 400px; margin: 0 auto;">
  <h2 class="form-title text-center">Registrar Cliente</h2>

  {% if messages %}
    <ul class="alert alert-info">
      {% for message in messages %}
        <li>{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <form method="post" id="formCliente">
      {% csrf_token %}
      <div class="mb-3 d-flex flex-column">
        <label class="form-label mb-1" for="cedula">Cédula:</label>
        <input type="text" name="cedula" id="cedula" class="form-control" pattern="\d{1,8}" maxlength="8" title="Solo números, máximo 8 dígitos" required>
      </div>
      <div class="mb-3 d-flex flex-column">
        <label class="form-label mb-1" for="nombre">Nombre:</label>
        <input type="text" name="nombre" id="nombre" class="form-control" pattern="[A-Za-z\s]+" maxlength="100" title="Solo letras y espacios" required>
      </div>
      <div class="mb-3 d-flex flex-column">
        <label class="form-label mb-1" for="telefono">Teléfono:</label>
        <input type="text" name="telefono" id="telefono" class="form-control" pattern="\d{11}" maxlength="11" title="Debe contener exactamente 11 números" required>
      </div>
      <div class="mb-3 d-flex flex-column">
        <label class="form-label mb-1" for="correo">Correo:</label>
        <input type="email" name="correo" id="correo" class="form-control" required>
      </div>
      <div class="mb-3 d-flex flex-column">
        <label class="form-label mb-1" for="direccion">Dirección:</label>
        <textarea name="direccion" id="direccion" class="form-control"></textarea>
      </div>
      <div class="mb-3">
        <button type="submit" class="btn btn-optica w-100"><i class="fas fa-user-plus me-2"></i>Registrar</button>
      </div>
  </form>
  <div class="d-flex justify-content-between align-items-center mt-4">
    <button type="button" class="btn btn-secondary btn-volver" onclick="window.history.back()"><i class="fas fa-arrow-left me-2"></i>Volver</button>
  </div>
</div>
<script>
    // Validar nombre: solo letras y espacios, máximo 100 caracteres
    const nombreInput = document.getElementById('nombre');
    nombreInput.addEventListener('input', function() {
        this.value = this.value.replace(/[^A-Za-z\s]/g, '');
        if (this.value.length > 100) {
            this.value = this.value.slice(0, 100);
        }
    });
    // Validar cédula: solo números, máximo 8 dígitos
    const cedulaInput = document.getElementById('cedula');
    cedulaInput.addEventListener('input', function() {
        this.value = this.value.replace(/[^0-9]/g, '');
        if (this.value.length > 8) {
            this.value = this.value.slice(0, 8);
        }
    });
    // Validar teléfono: solo números, exactamente 11 dígitos
    const telefonoInput = document.getElementById('telefono');
    telefonoInput.addEventListener('input', function() {
        this.value = this.value.replace(/[^0-9]/g, '');
        if (this.value.length > 11) {
            this.value = this.value.slice(0, 11);
        }
    });
</script>
{% endblock %}
